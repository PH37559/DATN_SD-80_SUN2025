<div th:fragment="content" xmlns:th="http://www.w3.org/1999/xhtml">
    <h3 class="mb-4">Danh sách chức vụ</h3>

    <div class="row mb-3 gx-2 align-items-center">
        <div class="col-md-auto">
            <a th:href="@{/chuc-vu/add}" class="btn btn-warning btn-sm w-100">+ Thêm mới</a>
        </div>
        <div class="col">
            <form th:action="@{/chuc-vu/hien-thi}" method="get"
                  class="row gx-2 align-items-center w-100 justify-content-end">
                <div class="col-md-4">
                    <input type="text" name="keyword" th:value="${keyword}" class="form-control form-control-sm"
                           placeholder="Tìm theo tên">
                </div>

                <div class="col-md-4">
                    <select name="trangThai" class="form-select form-select-sm">
                        <option value="">--Tất cả trạng thái--</option>
                        <option value="1" th:selected="${trangThai == 1}">Đang hoạt động</option>
                        <option value="0" th:selected="${trangThai == 0}">Ngừng hoạt động</option>
                    </select>
                </div>
                <div class="col-md-auto">
                    <button type="submit" class="btn btn-primary btn-sm w-100">Tìm kiếm</button>
                </div>
            </form>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center" style="font-size: 16px;">
            <thead class="table-dark">
            <tr>
                <th style="white-space: nowrap;">Mã CV</th>
                <th style="white-space: nowrap;">Tên chức vụ</th>
                <th style="white-space: nowrap;">Trạng thái</th>
                <th style="white-space: nowrap;">Thao tác</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="cv : ${list}" th:if="${!list.isEmpty()}">
                <td th:text="${cv.id}" style="white-space: nowrap;"></td>
                <td th:text="${cv.tenChucVu}" style="white-space: nowrap;"></td>
                <td>
                    <span th:text="${cv.trangThai == 1 ? 'Đang hoạt động' : 'Đã nghỉ'}"
                          th:class="${cv.trangThai == 1} ? 'badge bg-success' : 'badge bg-secondary'"></span>
                </td>
                <td style="white-space: nowrap;">
                    <a th:href="@{/chuc-vu/edit/{id}(id=${cv.id})}" class="btn btn-warning btn-sm">Sửa</a>
                    <a th:href="@{/chuc-vu/delete/{id}(id=${cv.id})}" class="btn btn-danger btn-sm"
                       onclick="return confirm('Bạn có chắc muốn xóa?')">Xóa</a>
                </td>
            </tr>
            <!-- Nếu không có kết quả -->
            <tr th:if="${list.isEmpty()}">
                <td colspan="11" class="text-center text-muted">Không tìm thấy kết quả</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Phân trang -->
    <nav aria-label="Page navigation" th:if="${list != null and !list.isEmpty()}">
        <ul class="pagination justify-content-center">

            <!-- Nút Trước -->
            <li class="page-item" th:classappend="${currentPage != null and currentPage == 0} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/chuc-vu/hien-thi(
                        page=${currentPage != null and currentPage > 0 ? currentPage - 1 : 0},
                        size=${size},
                        keyword=${keyword},
                        trangThai=${trangThai})}">
                    Trước
                </a>
            </li>

            <!-- Các số trang -->
            <li class="page-item"
                th:each="i : ${#numbers.sequence(0, totalPage - 1)}"
                th:classappend="${currentPage != null and i == currentPage} ? 'active'">
                <a class="page-link"
                   th:href="@{/chuc-vu/hien-thi(
                        page=${i},
                        size=${size},
                        keyword=${keyword},
                        trangThai=${trangThai})}"
                   th:text="${i + 1}">
                </a>
            </li>

            <!-- Nút Tiếp -->
            <li class="page-item"
                th:classappend="${currentPage != null and currentPage + 1 >= totalPage} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/chuc-vu/hien-thi(
                        page=${currentPage != null and currentPage + 1 < totalPage ? currentPage + 1 : currentPage},
                        size=${size},
                        keyword=${keyword},
                        trangThai=${trangThai})}">
                    Tiếp
                </a>
            </li>
        </ul>
    </nav>

</div>
